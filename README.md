# WildBerries Parser

Программа для парсинга товаров с WildBerries через их API и извлечения ID продуктов.

## Возможности

- Поиск товаров по любому запросу
- Получение списка ID всех найденных продуктов
- Поддержка пагинации (поиск по страницам)
- Получение общего количества найденных товаров
- Обработка ошибок и логирование
- Примеры использования

## Установка

1. Клонируйте репозиторий или скачайте файлы
2. Установите зависимости:

```bash
pip install -r requirements.txt
```

## Использование

### Базовое использование

```python
from wb_parser import WBParser

parser = WBParser()

# Поиск по запросу
query = "куртка женская черная"
product_ids = parser.search_products(query)

print(f"Найдено {len(product_ids)} товаров")
print("ID товаров:", product_ids)
```

### Запуск основного скрипта

```bash
python3 wb_parser.py
```

### Запуск примеров

```bash
python3 example_usage.py
```

### Интерактивный режим

```bash
python3 interactive_parser.py
```

Интерактивный режим позволяет вводить запросы в реальном времени и сохранять результаты.

### CLI режим (командная строка)

```bash
# Базовое использование
python3 wb_cli.py -q "куртка женская черная"

# С показом общего количества
python3 wb_cli.py -q "iPhone" --total

# Загрузка нескольких страниц
python3 wb_cli.py -q "телефон" --pages 3

# Сохранение в файл
python3 wb_cli.py -q "ноутбук" --save

# JSON формат
python3 wb_cli.py -q "кроссовки" --format json

# CSV формат с сохранением
python3 wb_cli.py -q "платье" --format csv --save

# Тихий режим (только результаты)
python3 wb_cli.py -q "часы" --quiet
```

## CLI Параметры

### Основные опции

- `-q, --query` - Поисковый запрос (обязательный)
- `-p, --page` - Номер страницы (по умолчанию: 1)
- `--pages` - Количество страниц для загрузки (с 1 по указанную)
- `-s, --save` - Сохранить в файл (автоматическое имя или указанное)
- `--total` - Показать общее количество товаров
- `--quiet` - Тихий режим (только результаты)
- `--format` - Формат вывода: list, json, csv

### Примеры CLI команд

```bash
# Справка
python3 wb_cli.py --help

# Простой поиск
python3 wb_cli.py -q "куртка женская черная"

# Поиск с общим количеством
python3 wb_cli.py -q "iPhone" --total

# Загрузка 3 страниц
python3 wb_cli.py -q "телефон" --pages 3

# Сохранение в JSON
python3 wb_cli.py -q "ноутбук" --format json --save

# Тихий режим с CSV
python3 wb_cli.py -q "кроссовки" --quiet --format csv
```

## API класса WBParser

### Методы

- `search_products(query, page=1)` - поиск товаров по запросу
- `get_total_products(query)` - получение общего количества найденных товаров
- `build_url(query, page=1)` - формирование URL для запроса
- `fetch_data(url)` - выполнение HTTP запроса
- `extract_product_ids(data)` - извлечение ID из JSON ответа

### Параметры

- `query` - поисковый запрос (например, "телефон Samsung")
- `page` - номер страницы (по умолчанию 1)

## Примеры запросов

- "куртка женская черная"
- "телефон iPhone"
- "кроссовки Nike"
- "ноутбук ASUS"
- "платье летнее"

## Структура проекта

```
wb-parser/
├── wb_parser.py           # Основной модуль парсера
├── wb_cli.py             # CLI версия с аргументами командной строки
├── example_usage.py       # Примеры использования
├── interactive_parser.py  # Интерактивный парсер
├── test_parser.py         # Тесты
├── requirements.txt       # Зависимости
└── README.md             # Документация
```

## Особенности

- Использует официальный API WildBerries
- Имитирует запросы браузера для стабильной работы
- Поддерживает кодировку URL для русских запросов
- Включает подробное логирование для отладки
- Обрабатывает ошибки сети и парсинга JSON

## Ограничения

- Получает данные только с первой страницы по умолчанию
- Для получения всех товаров нужно использовать пагинацию
- Соблюдайте разумные интервалы между запросами

## Лицензия

MIT License
